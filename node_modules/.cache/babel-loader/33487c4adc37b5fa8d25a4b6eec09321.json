{"ast":null,"code":"\"use strict\";\n\nfunction noop() {}\n\nfunction once(emitter, name) {\n  const o = once.spread(emitter, name);\n  const r = o.then(args => args[0]);\n  r.cancel = o.cancel;\n  return r;\n}\n\n(function (once) {\n  function spread(emitter, name) {\n    let c = null;\n    const p = new Promise((resolve, reject) => {\n      function cancel() {\n        emitter.removeListener(name, onEvent);\n        emitter.removeListener('error', onError);\n        p.cancel = noop;\n      }\n\n      function onEvent() {\n        cancel();\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        resolve(args);\n      }\n\n      function onError(err) {\n        cancel();\n        reject(err);\n      }\n\n      c = cancel;\n      emitter.on(name, onEvent);\n      emitter.on('error', onError);\n    });\n\n    if (!c) {\n      throw new TypeError('Could not get `cancel()` function');\n    }\n\n    p.cancel = c;\n    return p;\n  }\n\n  once.spread = spread;\n})(once || (once = {}));\n\nmodule.exports = once;","map":{"version":3,"mappings":";;AAEA,SAASA,IAAT,GAAa,CAAK;;AAElB,SAASC,IAAT,CACCC,OADD,EAECC,IAFD,EAEa;AAEZ,QAAMC,CAAC,GAAGH,IAAI,CAACI,MAAL,CAAiBH,OAAjB,EAA0BC,IAA1B,CAAV;AACA,QAAMG,CAAC,GAAGF,CAAC,CAACG,IAAF,CAAQC,IAAD,IAAeA,IAAI,CAAC,CAAD,CAA1B,CAAV;AACAF,GAAC,CAACG,MAAF,GAAWL,CAAC,CAACK,MAAb;AACA,SAAOH,CAAP;AACA;;AAED,WAAUL,IAAV,EAAc;AAWb,WAAgBI,MAAhB,CACCH,OADD,EAECC,IAFD,EAEa;AAEZ,QAAIO,CAAC,GAA+B,IAApC;AACA,UAAMC,CAAC,GAAG,IAAIC,OAAJ,CAAe,CAACC,OAAD,EAAUC,MAAV,KAAoB;AAC5C,eAASL,MAAT,GAAe;AACdP,eAAO,CAACa,cAAR,CAAuBZ,IAAvB,EAA6Ba,OAA7B;AACAd,eAAO,CAACa,cAAR,CAAuB,OAAvB,EAAgCE,OAAhC;AACAN,SAAC,CAACF,MAAF,GAAWT,IAAX;AACA;;AACD,eAASgB,OAAT,GAA+B;AAC9BP,cAAM;;AADwB,0CAAXD,IAAW;AAAXA,cAAW;AAAA;;AAE9BK,eAAO,CAACL,IAAD,CAAP;AACA;;AACD,eAASS,OAAT,CAAiBC,GAAjB,EAA2B;AAC1BT,cAAM;AACNK,cAAM,CAACI,GAAD,CAAN;AACA;;AACDR,OAAC,GAAGD,MAAJ;AACAP,aAAO,CAACiB,EAAR,CAAWhB,IAAX,EAAiBa,OAAjB;AACAd,aAAO,CAACiB,EAAR,CAAW,OAAX,EAAoBF,OAApB;AACA,KAjBS,CAAV;;AAkBA,QAAI,CAACP,CAAL,EAAQ;AACP,YAAM,IAAIU,SAAJ,CAAc,mCAAd,CAAN;AACA;;AACDT,KAAC,CAACF,MAAF,GAAWC,CAAX;AACA,WAAOC,CAAP;AACA;;AA5BeV,gBAAMI,MAAN;AA6BhB,CAxCD,EAAUJ,IAAI,KAAJA,IAAI,MAAd;;AA0CAoB,iBAASpB,IAAT","names":["noop","once","emitter","name","o","spread","r","then","args","cancel","c","p","Promise","resolve","reject","removeListener","onEvent","onError","err","on","TypeError","module"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}