{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getHashFromLocation = exports.getNormalisedUserContext = exports.checkForSSRErrorAndAppendIfNeeded = exports.getQueryParams = exports.isTest = exports.normaliseInputAppInfoOrThrowError = exports.appendQueryParamsToURL = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\n\nvar windowHandler_1 = require(\"./windowHandler\");\n\nvar constants_1 = require(\"./constants\");\n\nvar normalisedURLDomain_1 = require(\"./normalisedURLDomain\");\n\nvar normalisedURLPath_1 = require(\"./normalisedURLPath\");\n\nfunction appendQueryParamsToURL(stringUrl, queryParams) {\n  if (queryParams === undefined) {\n    return stringUrl;\n  }\n\n  try {\n    var url_1 = new URL(stringUrl);\n    Object.entries(queryParams).forEach(function (_a) {\n      var key = _a[0],\n          value = _a[1];\n      url_1.searchParams.set(key, value);\n    });\n    return url_1.href;\n  } catch (e) {\n    var fakeDomain = stringUrl.startsWith(\"/\") ? \"http:localhost\" : \"http://localhost/\";\n    var url_2 = new URL(\"\".concat(fakeDomain).concat(stringUrl));\n    Object.entries(queryParams).forEach(function (_a) {\n      var key = _a[0],\n          value = _a[1];\n      url_2.searchParams.set(key, value);\n    });\n    return \"\".concat(url_2.pathname).concat(url_2.search);\n  }\n}\n\nexports.appendQueryParamsToURL = appendQueryParamsToURL;\n\nfunction getNormalisedURLPathOrDefault(defaultPath, path) {\n  if (path !== undefined) {\n    return new normalisedURLPath_1.default(path);\n  } else {\n    return new normalisedURLPath_1.default(defaultPath);\n  }\n}\n\nfunction normaliseInputAppInfoOrThrowError(appInfo) {\n  if (appInfo === undefined) {\n    throw new Error(\"Please provide the appInfo object when calling supertokens.init\");\n  }\n\n  if (appInfo.apiDomain === undefined) {\n    throw new Error(\"Please provide your apiDomain inside the appInfo object when calling supertokens.init\");\n  }\n\n  if (appInfo.appName === undefined) {\n    throw new Error(\"Please provide your appName inside the appInfo object when calling supertokens.init\");\n  }\n\n  var apiGatewayPath = new normalisedURLPath_1.default(\"\");\n\n  if (appInfo.apiGatewayPath !== undefined) {\n    apiGatewayPath = new normalisedURLPath_1.default(appInfo.apiGatewayPath);\n  }\n\n  return {\n    appName: appInfo.appName,\n    apiDomain: new normalisedURLDomain_1.default(appInfo.apiDomain),\n    apiBasePath: apiGatewayPath.appendPath(getNormalisedURLPathOrDefault(constants_1.DEFAULT_API_BASE_PATH, appInfo.apiBasePath))\n  };\n}\n\nexports.normaliseInputAppInfoOrThrowError = normaliseInputAppInfoOrThrowError;\n\nfunction isTest() {\n  try {\n    return process.env.TEST_MODE === \"testing\";\n  } catch (err) {\n    // can get Uncaught ReferenceError: process is not defined error\n    return false;\n  }\n}\n\nexports.isTest = isTest;\n\nfunction getQueryParams(param) {\n  var urlParams = new URLSearchParams(windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch());\n  var queryParam = urlParams.get(param);\n\n  if (queryParam === null) {\n    return undefined;\n  }\n\n  return queryParam;\n}\n\nexports.getQueryParams = getQueryParams;\n\nfunction checkForSSRErrorAndAppendIfNeeded(error) {\n  // tslint:disable-next-line\n  if (typeof window === \"undefined\") {\n    error = error + constants_1.SSR_ERROR;\n  }\n\n  return error;\n}\n\nexports.checkForSSRErrorAndAppendIfNeeded = checkForSSRErrorAndAppendIfNeeded;\n\nfunction getNormalisedUserContext(userContext) {\n  return userContext === undefined ? {} : userContext;\n}\n\nexports.getNormalisedUserContext = getNormalisedUserContext;\n\nfunction getHashFromLocation() {\n  // By default it is returned with the \"#\" at the beginning, we cut that off here.\n  return windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1);\n}\n\nexports.getHashFromLocation = getHashFromLocation;","map":{"version":3,"sources":["/home/dom/FlyM/node_modules/supertokens-web-js/lib/build/utils.js"],"names":["Object","defineProperty","exports","value","getHashFromLocation","getNormalisedUserContext","checkForSSRErrorAndAppendIfNeeded","getQueryParams","isTest","normaliseInputAppInfoOrThrowError","appendQueryParamsToURL","windowHandler_1","require","constants_1","normalisedURLDomain_1","normalisedURLPath_1","stringUrl","queryParams","undefined","url_1","URL","entries","forEach","_a","key","searchParams","set","href","e","fakeDomain","startsWith","url_2","concat","pathname","search","getNormalisedURLPathOrDefault","defaultPath","path","default","appInfo","Error","apiDomain","appName","apiGatewayPath","apiBasePath","appendPath","DEFAULT_API_BASE_PATH","process","env","TEST_MODE","err","param","urlParams","URLSearchParams","WindowHandlerReference","getReferenceOrThrow","windowHandler","location","getSearch","queryParam","get","error","window","SSR_ERROR","userContext","getHash","substring"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getHashFromLocation =\n    exports.getNormalisedUserContext =\n    exports.checkForSSRErrorAndAppendIfNeeded =\n    exports.getQueryParams =\n    exports.isTest =\n    exports.normaliseInputAppInfoOrThrowError =\n    exports.appendQueryParamsToURL =\n        void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar windowHandler_1 = require(\"./windowHandler\");\nvar constants_1 = require(\"./constants\");\nvar normalisedURLDomain_1 = require(\"./normalisedURLDomain\");\nvar normalisedURLPath_1 = require(\"./normalisedURLPath\");\nfunction appendQueryParamsToURL(stringUrl, queryParams) {\n    if (queryParams === undefined) {\n        return stringUrl;\n    }\n    try {\n        var url_1 = new URL(stringUrl);\n        Object.entries(queryParams).forEach(function (_a) {\n            var key = _a[0],\n                value = _a[1];\n            url_1.searchParams.set(key, value);\n        });\n        return url_1.href;\n    } catch (e) {\n        var fakeDomain = stringUrl.startsWith(\"/\") ? \"http:localhost\" : \"http://localhost/\";\n        var url_2 = new URL(\"\".concat(fakeDomain).concat(stringUrl));\n        Object.entries(queryParams).forEach(function (_a) {\n            var key = _a[0],\n                value = _a[1];\n            url_2.searchParams.set(key, value);\n        });\n        return \"\".concat(url_2.pathname).concat(url_2.search);\n    }\n}\nexports.appendQueryParamsToURL = appendQueryParamsToURL;\nfunction getNormalisedURLPathOrDefault(defaultPath, path) {\n    if (path !== undefined) {\n        return new normalisedURLPath_1.default(path);\n    } else {\n        return new normalisedURLPath_1.default(defaultPath);\n    }\n}\nfunction normaliseInputAppInfoOrThrowError(appInfo) {\n    if (appInfo === undefined) {\n        throw new Error(\"Please provide the appInfo object when calling supertokens.init\");\n    }\n    if (appInfo.apiDomain === undefined) {\n        throw new Error(\"Please provide your apiDomain inside the appInfo object when calling supertokens.init\");\n    }\n    if (appInfo.appName === undefined) {\n        throw new Error(\"Please provide your appName inside the appInfo object when calling supertokens.init\");\n    }\n    var apiGatewayPath = new normalisedURLPath_1.default(\"\");\n    if (appInfo.apiGatewayPath !== undefined) {\n        apiGatewayPath = new normalisedURLPath_1.default(appInfo.apiGatewayPath);\n    }\n    return {\n        appName: appInfo.appName,\n        apiDomain: new normalisedURLDomain_1.default(appInfo.apiDomain),\n        apiBasePath: apiGatewayPath.appendPath(\n            getNormalisedURLPathOrDefault(constants_1.DEFAULT_API_BASE_PATH, appInfo.apiBasePath)\n        ),\n    };\n}\nexports.normaliseInputAppInfoOrThrowError = normaliseInputAppInfoOrThrowError;\nfunction isTest() {\n    try {\n        return process.env.TEST_MODE === \"testing\";\n    } catch (err) {\n        // can get Uncaught ReferenceError: process is not defined error\n        return false;\n    }\n}\nexports.isTest = isTest;\nfunction getQueryParams(param) {\n    var urlParams = new URLSearchParams(\n        windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getSearch()\n    );\n    var queryParam = urlParams.get(param);\n    if (queryParam === null) {\n        return undefined;\n    }\n    return queryParam;\n}\nexports.getQueryParams = getQueryParams;\nfunction checkForSSRErrorAndAppendIfNeeded(error) {\n    // tslint:disable-next-line\n    if (typeof window === \"undefined\") {\n        error = error + constants_1.SSR_ERROR;\n    }\n    return error;\n}\nexports.checkForSSRErrorAndAppendIfNeeded = checkForSSRErrorAndAppendIfNeeded;\nfunction getNormalisedUserContext(userContext) {\n    return userContext === undefined ? {} : userContext;\n}\nexports.getNormalisedUserContext = getNormalisedUserContext;\nfunction getHashFromLocation() {\n    // By default it is returned with the \"#\" at the beginning, we cut that off here.\n    return windowHandler_1.WindowHandlerReference.getReferenceOrThrow().windowHandler.location.getHash().substring(1);\n}\nexports.getHashFromLocation = getHashFromLocation;\n"]},"metadata":{},"sourceType":"script"}