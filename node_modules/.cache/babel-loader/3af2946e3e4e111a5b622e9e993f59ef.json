{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OverrideableBuilder = void 0;\n\nvar getProxyObject_1 = require(\"./getProxyObject\");\n\nvar OverrideableBuilder =\n/** @class */\nfunction () {\n  function OverrideableBuilder(originalImplementation) {\n    this.layers = [originalImplementation];\n    this.proxies = [];\n  }\n\n  OverrideableBuilder.prototype.override = function (overrideFunc) {\n    var proxy = (0, getProxyObject_1.getProxyObject)(this.layers[0]);\n    var layer = overrideFunc(proxy, this);\n\n    for (var _i = 0, _a = Object.keys(this.layers[0]); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      if (layer[key] === proxy[key] || key === \"_call\") {\n        delete layer[key];\n      } else if (layer[key] === undefined) {\n        layer[key] = null;\n      }\n    }\n\n    this.layers.push(layer);\n    this.proxies.push(proxy);\n    return this;\n  };\n\n  OverrideableBuilder.prototype.build = function () {\n    var _this = this;\n\n    if (this.result) {\n      return this.result;\n    }\n\n    this.result = {};\n\n    for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n\n      for (var _b = 0, _c = Object.keys(layer); _b < _c.length; _b++) {\n        var key = _c[_b];\n        var override = layer[key];\n\n        if (override !== undefined) {\n          if (override === null) {\n            this.result[key] = undefined;\n          } else if (typeof override === \"function\") {\n            this.result[key] = override.bind(this.result);\n          } else {\n            this.result[key] = override;\n          }\n        }\n      }\n    }\n\n    var _loop_1 = function (proxyInd) {\n      var proxy = this_1.proxies[proxyInd];\n\n      proxy._call = function (fname, args) {\n        for (var i = proxyInd; i >= 0; --i) {\n          var func = _this.layers[i][fname];\n\n          if (func !== undefined && func !== null) {\n            return func.bind(_this.result).apply(void 0, args);\n          }\n        }\n      };\n    };\n\n    var this_1 = this;\n\n    for (var proxyInd = 0; proxyInd < this.proxies.length; ++proxyInd) {\n      _loop_1(proxyInd);\n    }\n\n    return this.result;\n  };\n\n  return OverrideableBuilder;\n}();\n\nexports.OverrideableBuilder = OverrideableBuilder;\nexports.default = OverrideableBuilder;","map":{"version":3,"sources":["/home/dom/FlyM/node_modules/supertokens-js-override/lib/build/index.js"],"names":["Object","defineProperty","exports","value","OverrideableBuilder","getProxyObject_1","require","originalImplementation","layers","proxies","prototype","override","overrideFunc","proxy","getProxyObject","layer","_i","_a","keys","length","key","undefined","push","build","_this","result","_b","_c","bind","_loop_1","proxyInd","this_1","_call","fname","args","i","func","apply","default"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OverrideableBuilder = void 0;\nvar getProxyObject_1 = require(\"./getProxyObject\");\nvar OverrideableBuilder = /** @class */ (function () {\n    function OverrideableBuilder(originalImplementation) {\n        this.layers = [originalImplementation];\n        this.proxies = [];\n    }\n    OverrideableBuilder.prototype.override = function (overrideFunc) {\n        var proxy = (0, getProxyObject_1.getProxyObject)(this.layers[0]);\n        var layer = overrideFunc(proxy, this);\n        for (var _i = 0, _a = Object.keys(this.layers[0]); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (layer[key] === proxy[key] || key === \"_call\") {\n                delete layer[key];\n            }\n            else if (layer[key] === undefined) {\n                layer[key] = null;\n            }\n        }\n        this.layers.push(layer);\n        this.proxies.push(proxy);\n        return this;\n    };\n    OverrideableBuilder.prototype.build = function () {\n        var _this = this;\n        if (this.result) {\n            return this.result;\n        }\n        this.result = {};\n        for (var _i = 0, _a = this.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            for (var _b = 0, _c = Object.keys(layer); _b < _c.length; _b++) {\n                var key = _c[_b];\n                var override = layer[key];\n                if (override !== undefined) {\n                    if (override === null) {\n                        this.result[key] = undefined;\n                    }\n                    else if (typeof override === \"function\") {\n                        this.result[key] = override.bind(this.result);\n                    }\n                    else {\n                        this.result[key] = override;\n                    }\n                }\n            }\n        }\n        var _loop_1 = function (proxyInd) {\n            var proxy = this_1.proxies[proxyInd];\n            proxy._call = function (fname, args) {\n                for (var i = proxyInd; i >= 0; --i) {\n                    var func = _this.layers[i][fname];\n                    if (func !== undefined && func !== null) {\n                        return func.bind(_this.result).apply(void 0, args);\n                    }\n                }\n            };\n        };\n        var this_1 = this;\n        for (var proxyInd = 0; proxyInd < this.proxies.length; ++proxyInd) {\n            _loop_1(proxyInd);\n        }\n        return this.result;\n    };\n    return OverrideableBuilder;\n}());\nexports.OverrideableBuilder = OverrideableBuilder;\nexports.default = OverrideableBuilder;\n"]},"metadata":{},"sourceType":"script"}